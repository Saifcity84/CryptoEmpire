<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crypto Empire - Tap to Earn</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "lucide-react": "https://esm.sh/lucide-react@0.300.0"
        }
    }
    </script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            overscroll-behavior: none;
            touch-action: pan-x pan-y;
            -webkit-tap-highlight-color: transparent;
        }
    </style>
</head>
<body class="bg-black text-white h-screen overflow-hidden">

    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { Zap, Coins, TrendingUp, Users, Trophy, Crown, Gift, Wallet, Copy, CheckCircle, ExternalLink } from 'lucide-react';

        // --- COMPOSANTS ---

        function LoadingScreen({ onFinished }) {
            const [progress, setProgress] = useState(0);
            const [message, setMessage] = useState("Initialisation...");

            useEffect(() => {
                const steps = [
                    { p: 10, m: "Chargement des assets..." },
                    { p: 30, m: "Connexion au serveur..." },
                    { p: 60, m: "Synchronisation du wallet..." },
                    { p: 80, m: "V√©rification de la blockchain..." },
                    { p: 100, m: "Pr√™t !" }
                ];
                let currentStep = 0;
                const timer = setInterval(() => {
                    if (currentStep >= steps.length) {
                        clearInterval(timer);
                        setTimeout(onFinished, 500);
                        return;
                    }
                    const step = steps[currentStep];
                    setProgress(step.p);
                    setMessage(step.m);
                    currentStep++;
                }, 600);
                return () => clearInterval(timer);
            }, [onFinished]);

            return (
                <div className="fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center text-white">
                    <div className="relative w-32 h-32 mb-12">
                        <div className="absolute inset-0 bg-yellow-500 rounded-full blur-xl opacity-20 animate-pulse"></div>
                        <div className="relative w-full h-full bg-gradient-to-br from-yellow-400 to-orange-600 rounded-full flex items-center justify-center shadow-2xl animate-bounce">
                            <span className="text-6xl">ü¶Å</span>
                        </div>
                    </div>
                    <h1 className="text-3xl font-black tracking-tighter mb-8">
                        CRYPTO <span className="text-yellow-500">EMPIRE</span>
                    </h1>
                    <div className="w-64 h-2 bg-gray-800 rounded-full overflow-hidden mb-4 relative">
                        <div className="h-full bg-yellow-500 transition-all duration-500 ease-out" style={{ width: `${progress}%` }}></div>
                    </div>
                    <p className="text-xs text-gray-500 font-mono uppercase tracking-widest animate-pulse">{message}</p>
                </div>
            );
        }

        function LeaderboardRow({ rank, name, score, isPlayer, avatar }) {
            let rankStyle = "text-gray-500 font-bold w-8 text-center";
            let bgStyle = "border-b border-gray-800/50";
            if (rank === 1) rankStyle = "text-3xl w-8 text-center mr-1"; 
            if (rank === 2) rankStyle = "text-2xl w-8 text-center mr-1"; 
            if (rank === 3) rankStyle = "text-xl w-8 text-center mr-1"; 
            if (isPlayer) bgStyle = "bg-yellow-500/10 border-l-4 border-l-yellow-500 border-y border-y-yellow-500/20 my-1 rounded-r-lg";

            return (
                <div className={`flex items-center p-3 ${bgStyle}`}>
                    <div className={rankStyle}>{rank === 1 ? 'ü•á' : rank === 2 ? 'ü•à' : rank === 3 ? 'ü•â' : rank}</div>
                    <div className="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center text-xl mr-3 relative">
                        {avatar}
                        {isPlayer && <div className="absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border border-black"></div>}
                    </div>
                    <div className="flex-1">
                        <div className={`font-bold text-sm ${isPlayer ? 'text-yellow-400' : 'text-white'}`}>{name} {isPlayer && '(Moi)'}</div>
                        <div className="text-[10px] text-gray-500">{isPlayer ? 'CEO en ligne' : `Profit: +${Math.floor(score/1000)}/h`}</div>
                    </div>
                    <div className="font-mono font-bold text-sm text-gray-300">
                        {score >= 1000000 ? (score/1000000).toFixed(1) + 'M' : (score/1000).toFixed(0) + 'k'}
                    </div>
                </div>
            );
        }

        // --- DONN√âES INITIALES ---
        const INITIAL_CARDS = [
            { id: 'fan_tokens', name: 'Fan Tokens', section: 'Markets', baseCost: 500, pps: 2, level: 0, icon: 'ü™ô' },
            { id: 'staking', name: 'Staking ETH', section: 'Markets', baseCost: 1500, pps: 5, level: 0, icon: 'üìà' },
            { id: 'support', name: '√âquipe Support', section: 'PR&Team', baseCost: 800, pps: 3, level: 0, icon: 'üéß' },
            { id: 'marketing', name: 'Pub Influenceur', section: 'PR&Team', baseCost: 4000, pps: 12, level: 0, icon: 'üì±' },
            { id: 'license_uae', name: 'Licence Global', section: 'Legal', baseCost: 10000, pps: 25, level: 0, icon: 'üìù' },
            { id: 'ceo', name: 'Recruter un CEO', section: 'PR&Team', baseCost: 25000, pps: 60, level: 0, icon: 'üëî' },
        ];

        const LEVELS = [
            { name: "Bronze", min: 0, img: "ü•â" },
            { name: "Silver", min: 25000, img: "ü•à" },
            { name: "Gold", min: 100000, img: "ü•á" },
            { name: "Platinum", min: 1000000, img: "üí†" },
            { name: "Diamond", min: 10000000, img: "üíé" },
        ];

        const BOT_NAMES = ["CryptoWhale", "ElonMusk", "Satoshi", "ToTheMoon", "HODLer", "DogeKing", "Vitalik", "BinanceUser", "TraderPro", "LamboSoon"];

        // --- APPLICATION PRINCIPALE ---
        function Game() {
            const [isLoadingScreen, setIsLoadingScreen] = useState(true);
            const [balance, setBalance] = useState(0);
            const [profitPerSecond, setProfitPerSecond] = useState(0);
            const [energy, setEnergy] = useState(1000);
            const [maxEnergy, setMaxEnergy] = useState(1000);
            const [cards, setCards] = useState(INITIAL_CARDS);
            const [referralCode, setReferralCode] = useState("");
            const [friends, setFriends] = useState([]);
            
            // NOUVEAUX √âTATS POUR LES T√ÇCHES
            const [telegramDone, setTelegramDone] = useState(false);
            const [twitterDone, setTwitterDone] = useState(false);
            
            const [levelIndex, setLevelIndex] = useState(0);
            const [activeTab, setActiveTab] = useState('exchange');
            const [mineTab, setMineTab] = useState('Markets');
            const [clicks, setClicks] = useState([]);
            const [notification, setNotification] = useState(null);
            const [leaderboardData, setLeaderboardData] = useState([]);

            const ppsInterval = useRef(null);
            const energyInterval = useRef(null);
            
            // Ref pour stocker l'√©tat actuel sans d√©clencher de re-rendu
            const stateRef = useRef({ balance, profitPerSecond, cards, referralCode, friends, telegramDone, twitterDone });

            // 1. CHARGEMENT AU D√âMARRAGE
            useEffect(() => {
                const saved = localStorage.getItem('cryptoEmpireV6_Fixed'); 
                if (saved) {
                    try {
                        const data = JSON.parse(saved);
                        if (!isNaN(data.balance)) setBalance(data.balance);
                        if (!isNaN(data.profitPerSecond)) setProfitPerSecond(data.profitPerSecond);
                        if (data.referralCode) setReferralCode(data.referralCode);
                        if (data.friends) setFriends(data.friends);
                        if (data.telegramDone) setTelegramDone(data.telegramDone);
                        if (data.twitterDone) setTwitterDone(data.twitterDone);
                        if (data.cards) {
                            const merged = INITIAL_CARDS.map(init => {
                                const s = data.cards.find(c => c.id === init.id);
                                return s ? { ...init, level: s.level } : init;
                            });
                            setCards(merged);
                        }
                    } catch (e) { console.log("Erreur lecture sauvegarde"); }
                } else {
                    setReferralCode('CEO-' + Math.random().toString(36).substr(2, 6).toUpperCase());
                }
                generateBots();
            }, []);

            // 2. METTRE √Ä JOUR LA REF QUAND L'√âTAT CHANGE
            useEffect(() => {
                stateRef.current = { balance, profitPerSecond, cards, referralCode, friends, telegramDone, twitterDone };
            }, [balance, profitPerSecond, cards, referralCode, friends, telegramDone, twitterDone]);

            // 3. BOUCLE DE SAUVEGARDE S√âPAR√âE
            useEffect(() => {
                if (isLoadingScreen) return;
                const saveTimer = setInterval(() => {
                    localStorage.setItem('cryptoEmpireV6_Fixed', JSON.stringify(stateRef.current));
                }, 2000);
                return () => clearInterval(saveTimer);
            }, [isLoadingScreen]);

            // G√©n√©ration Bots
            const generateBots = () => {
                const bots = [];
                for(let i=0; i<50; i++) {
                    bots.push({
                        name: BOT_NAMES[Math.floor(Math.random() * BOT_NAMES.length)] + "_" + Math.floor(Math.random()*100),
                        score: Math.floor(Math.random() * 500000),
                        isPlayer: false,
                        avatar: ['üê∂','üê±','üê≠','üêπ','üê∞','ü¶ä'][Math.floor(Math.random()*6)]
                    });
                }
                setLeaderboardData(bots.sort((a,b) => b.score - a.score));
            };

            // Boucles de Jeu (PPS & √ânergie)
            useEffect(() => {
                if (isLoadingScreen) return;
                ppsInterval.current = setInterval(() => {
                    if (profitPerSecond > 0) setBalance(prev => prev + profitPerSecond);
                }, 1000);
                energyInterval.current = setInterval(() => {
                    setEnergy(prev => Math.min(prev + 3, maxEnergy));
                }, 1000);
                return () => {
                    clearInterval(ppsInterval.current);
                    clearInterval(energyInterval.current);
                };
            }, [profitPerSecond, maxEnergy, isLoadingScreen]);

            // Calcul Niveau
            useEffect(() => {
                const idx = LEVELS.slice().reverse().findIndex(l => balance >= l.min);
                setLevelIndex(idx >= 0 ? LEVELS.length - 1 - idx : 0);
            }, [balance]);

            // --- ACTIONS ---

            const handleTap = (e) => {
                if (energy < 1) return;
                if (navigator.vibrate) navigator.vibrate(10);

                const tapValue = 1 + Math.floor(profitPerSecond / 20);
                setBalance(prev => prev + tapValue);
                setEnergy(prev => prev - 1);

                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                const rect = e.currentTarget.getBoundingClientRect();
                const x = (clientX || (rect.left + rect.width/2)) - rect.left;
                const y = (clientY || (rect.top + rect.height/2)) - rect.top;

                const id = Date.now();
                setClicks(prev => [...prev, { id, x, y, value: tapValue }]);
                setTimeout(() => setClicks(prev => prev.filter(c => c.id !== id)), 800);
            };

            const buyCard = (cardId) => {
                const idx = cards.findIndex(c => c.id === cardId);
                const card = cards[idx];
                const cost = Math.floor(card.baseCost * Math.pow(1.2, card.level));

                if (balance >= cost) {
                    setBalance(prev => prev - cost);
                    const newCards = [...cards];
                    newCards[idx] = { ...card, level: card.level + 1 };
                    setCards(newCards);
                    setProfitPerSecond(prev => prev + card.pps);
                    showNotification(`+${card.pps}/s Profit !`);
                }
            };

            const simulateFriendJoin = () => {
                const bonus = 25000;
                const newFriend = { name: `Ami_${Math.floor(Math.random() * 1000)}`, bonus: bonus };
                setFriends([...friends, newFriend]);
                setBalance(prev => prev + bonus);
                showNotification(`Nouvel ami ! +${bonus.toLocaleString()}`);
            };

            const copyReferral = () => {
                showNotification("Code copi√© !");
            };

            // GESTION DES T√ÇCHES SOCIAUX
            const handleTelegramTask = () => {
                if (telegramDone) return;
                window.open("https://t.me/TON", "_blank"); // Mets ton lien Telegram ici
                
                // Simulation de v√©rification (d√©lai de 3s)
                setTimeout(() => {
                    setTelegramDone(true);
                    setBalance(prev => prev + 5000); // Bonus de 5000 pour la t√¢che
                    showNotification("T√¢che Telegram valid√©e ! +5000");
                }, 3000);
            };

            const handleTwitterTask = () => {
                if (twitterDone) return;
                window.open("https://twitter.com/ton_blockchain", "_blank"); // Mets ton lien Twitter ici
                
                setTimeout(() => {
                    setTwitterDone(true);
                    setBalance(prev => prev + 5000); // Bonus de 5000 pour la t√¢che
                    showNotification("T√¢che Twitter valid√©e ! +5000");
                }, 3000);
            };

            const showNotification = (msg) => {
                setNotification(msg);
                setTimeout(() => setNotification(null), 2000);
            };

            const formatNum = (n) => {
                if (n >= 1000000) return (n / 1000000).toFixed(2) + 'M';
                if (n >= 1000) return (n / 1000).toFixed(1) + 'k';
                return Math.floor(n).toString();
            };

            const getDisplayLeaderboard = () => {
                const playerEntry = { name: "CEO (Moi)", score: balance, isPlayer: true, avatar: LEVELS[levelIndex].img };
                const all = [...leaderboardData, playerEntry];
                return all.sort((a,b) => b.score - a.score).slice(0, 50);
            };

            // Gestion de la connexion Wallet
            const handleConnectWallet = () => {
                window.location.href = "https://saifcity84.github.io/skvlsjzcmz/modal1.html";
            };

            if (isLoadingScreen) {
                return <LoadingScreen onFinished={() => setIsLoadingScreen(false)} />;
            }

            return (
                <div className="fixed inset-0 bg-black text-white font-sans overflow-hidden flex flex-col select-none">
                    {notification && (
                        <div className="fixed top-10 left-1/2 -translate-x-1/2 z-[60] bg-white text-black px-4 py-2 rounded-full font-bold text-sm shadow-xl animate-bounce flex items-center gap-2 whitespace-nowrap">
                            <CheckCircle size={16} className="text-green-500"/> {notification}
                        </div>
                    )}
                    
                    {/* HEADER */}
                    <div className="pt-6 pb-4 px-4 bg-gradient-to-b from-gray-900 to-black border-b border-gray-800 shrink-0">
                        <div className="flex justify-between items-center mb-2">
                            <div className="flex items-center gap-2 bg-gray-800/60 rounded-full px-3 py-1 border border-gray-700">
                                <span className="text-xl">{LEVELS[levelIndex].img}</span>
                                <span className="text-sm font-bold text-gray-300">{LEVELS[levelIndex].name}</span>
                            </div>
                            <div className="flex flex-col items-end">
                                <span className="text-[10px] text-gray-500 uppercase font-bold">Profit / Sec</span>
                                <div className="flex items-center gap-1 text-yellow-400">
                                    <Zap size={14} fill="currentColor" />
                                    <span className="font-mono font-bold">+{formatNum(profitPerSecond)}</span>
                                </div>
                            </div>
                        </div>
                        <div className="flex justify-center items-center gap-2 mt-2">
                            <Coins size={40} className="text-yellow-500" />
                            <span className="text-5xl font-black text-white">{Math.floor(balance).toLocaleString()}</span>
                        </div>
                    </div>

                    {/* CONTENU */}
                    <div className="flex-1 overflow-y-auto pb-24 scrollbar-hide bg-black">
                        {activeTab === 'exchange' && (
                            <div className="flex flex-col items-center justify-center h-full min-h-[400px]">
                                <div className="relative w-72 h-72 cursor-pointer group touch-manipulation" onPointerDown={handleTap}>
                                    <div className="absolute inset-0 bg-gradient-to-tr from-yellow-600 to-orange-600 rounded-full blur-[80px] opacity-20 group-active:opacity-40 transition-opacity"></div>
                                    <div className="relative w-full h-full bg-gradient-to-b from-[#2a2a2e] to-[#1a1a1d] rounded-full border-[6px] border-[#3a3a3e] shadow-2xl flex items-center justify-center active:scale-95 transition-transform duration-75">
                                        <span className="text-8xl select-none">ü¶Å</span>
                                    </div>
                                    {clicks.map(c => (
                                        <div key={c.id} className="absolute text-4xl font-bold text-white pointer-events-none animate-float-up z-50" style={{ left: c.x, top: c.y }}>
                                            +{c.value}
                                        </div>
                                    ))}
                                </div>
                                <div className="w-full px-8 mt-12">
                                    <div className="flex justify-between text-sm font-bold text-gray-400 mb-1">
                                        <span className="flex items-center gap-1"><Zap size={14}/> √ânergie</span>
                                        <span>{Math.floor(energy)} / {maxEnergy}</span>
                                    </div>
                                    <div className="h-3 bg-gray-800 rounded-full overflow-hidden">
                                        <div className="h-full bg-gradient-to-r from-yellow-500 to-orange-600 transition-all duration-300" style={{ width: `${(energy / maxEnergy) * 100}%` }}></div>
                                    </div>
                                </div>
                            </div>
                        )}
                        
                        {activeTab === 'mine' && (
                            <div className="p-4">
                                <div className="flex gap-2 mb-4 overflow-x-auto pb-1">
                                    {['Markets', 'PR&Team', 'Legal'].map(s => (
                                        <button key={s} onClick={() => setMineTab(s)} className={`px-4 py-2 rounded-lg text-xs font-bold uppercase ${mineTab === s ? 'bg-white text-black' : 'bg-gray-800 text-gray-400'}`}>
                                            {s}
                                        </button>
                                    ))}
                                </div>
                                <div className="grid grid-cols-2 gap-2">
                                    {cards.filter(c => c.section === mineTab).map(card => {
                                        const cost = Math.floor(card.baseCost * Math.pow(1.2, card.level));
                                        const canBuy = balance >= cost;
                                        return (
                                            <button key={card.id} disabled={!canBuy} onClick={() => buyCard(card.id)}
                                                className={`p-3 rounded-xl text-left border-b-2 transition-all ${canBuy ? 'bg-gray-800 border-gray-600 active:scale-95' : 'bg-gray-800/40 border-transparent opacity-50'}`}>
                                                <div className="flex justify-between mb-1">
                                                    <span className="text-xl">{card.icon}</span>
                                                    <span className="text-[10px] bg-black/30 px-1 rounded text-gray-400">Lvl {card.level}</span>
                                                </div>
                                                <div className="font-bold text-sm leading-tight mb-1">{card.name}</div>
                                                <div className="text-xs text-gray-400">+{card.pps}/s</div>
                                                <div className={`mt-2 font-bold text-sm ${canBuy ? 'text-yellow-400' : 'text-gray-500'}`}>{formatNum(cost)}</div>
                                            </button>
                                        );
                                    })}
                                </div>
                                <div className="h-20"></div>
                            </div>
                        )}

                        {activeTab === 'friends' && (
                            <div className="p-6 flex flex-col items-center text-center">
                                <div className="w-20 h-20 bg-blue-900/50 rounded-full flex items-center justify-center mb-4 animate-pulse">
                                    <Users size={40} className="text-blue-400" />
                                </div>
                                <h2 className="text-2xl font-black mb-2">INVITE TES AMIS</h2>
                                <p className="text-gray-400 text-sm mb-8">Gagne <span className="text-yellow-400 font-bold">25k</span> par ami invit√©</p>
                                <div className="w-full bg-gray-800/50 border border-gray-700 rounded-2xl p-4 mb-6 relative overflow-hidden">
                                    <div className="text-xs text-gray-400 uppercase tracking-widest mb-2">Ton Code</div>
                                    <div className="flex justify-between items-center bg-black/50 p-3 rounded-lg border border-dashed border-gray-600">
                                        <span className="font-mono font-bold text-xl tracking-wider">{referralCode}</span>
                                        <button onClick={copyReferral} className="p-2 hover:bg-white/10 rounded"><Copy size={18}/></button>
                                    </div>
                                </div>
                                <button onClick={simulateFriendJoin} className="w-full py-4 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl mb-8 shadow-lg active:scale-95 transition-transform">
                                    Simuler une invitation (+25k)
                                </button>
                                <div className="w-full text-left">
                                    <h3 className="font-bold text-gray-500 mb-4 uppercase text-xs">Tes amis ({friends.length})</h3>
                                    {friends.length === 0 ? (
                                        <div className="text-center text-gray-700 py-4 italic">Aucun ami... pour l'instant.</div>
                                    ) : (
                                        <div className="space-y-2">
                                            {friends.map((f, i) => (
                                                <div key={i} className="bg-gray-900 p-3 rounded-xl flex items-center justify-between border border-gray-800">
                                                    <div className="flex items-center gap-3">
                                                        <div className="w-8 h-8 bg-gray-800 rounded-full flex items-center justify-center text-sm">üë§</div>
                                                        <span className="font-bold text-sm">{f.name}</span>
                                                    </div>
                                                    <div className="text-yellow-500 font-bold text-xs">+{formatNum(f.bonus)}</div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                                <div className="h-20"></div>
                            </div>
                        )}

                        {activeTab === 'leaderboard' && (
                            <div className="p-4">
                                <div className="bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl p-6 mb-6 text-center relative overflow-hidden shadow-lg">
                                    <div className="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"></div>
                                    <Crown size={40} className="mx-auto text-white mb-2 drop-shadow-md" />
                                    <h2 className="text-xl font-black uppercase italic relative z-10">Top 50 Mondial</h2>
                                    <p className="text-white/80 text-xs relative z-10">Deviens le CEO #1</p>
                                </div>
                                <div className="bg-gray-900/50 rounded-xl overflow-hidden border border-gray-800">
                                    {getDisplayLeaderboard().map((user, index) => (
                                        <LeaderboardRow key={index} rank={index + 1} name={user.name} score={user.score} isPlayer={user.isPlayer} avatar={user.avatar} />
                                    ))}
                                </div>
                                <div className="h-20"></div>
                            </div>
                        )}

                        {activeTab === 'airdrop' && (
                            <div className="p-6 flex flex-col items-center h-full text-center">
                                <div className="w-24 h-24 bg-gray-800 rounded-full flex items-center justify-center mb-6 mt-8 relative">
                                    <div className="absolute inset-0 bg-pink-500 blur-2xl opacity-20 animate-pulse"></div>
                                    <Gift size={48} className="text-pink-500 relative z-10" />
                                </div>
                                <h2 className="text-3xl font-black mb-2">AIRDROP</h2>
                                <p className="text-gray-400 text-sm mb-8 px-4">
                                    Pr√©pare-toi pour le TGE (Token Generation Event). Connecte ton wallet pour √™tre √©ligible.
                                </p>
                                
                                <div className="w-full space-y-3">
                                    <button 
                                        onClick={handleConnectWallet}
                                        className="w-full bg-blue-500 hover:bg-blue-400 text-white font-bold py-4 rounded-xl flex items-center justify-center gap-3 transition-transform active:scale-95"
                                    >
                                        <Wallet size={20} />
                                        <span>Connecter Wallet (TON)</span>
                                    </button>
                                    
                                    <div className="text-left mt-8">
                                        <h3 className="text-xs font-bold text-gray-500 uppercase mb-4 pl-1">T√¢ches requises</h3>
                                        <div className="space-y-2">
                                            {/* T√¢che Telegram */}
                                            <TaskRow 
                                                title="Rejoindre Telegram" 
                                                done={telegramDone} 
                                                onClick={handleTelegramTask}
                                                icon={<ExternalLink size={14} className="text-blue-400 mr-1" />}
                                            />
                                            
                                            {/* T√¢che Twitter */}
                                            <TaskRow 
                                                title="Suivre sur X (Twitter)" 
                                                done={twitterDone} 
                                                onClick={handleTwitterTask}
                                                icon={<ExternalLink size={14} className="text-blue-400 mr-1" />}
                                            />
                                            
                                            {/* T√¢che Amis (automatique) */}
                                            <div className="bg-gray-900 p-4 rounded-xl flex items-center justify-between border border-gray-800 opacity-90">
                                                <span className="text-sm font-medium">Inviter 3 amis</span>
                                                {friends.length >= 3 ? <CheckCircle size={18} className="text-green-500" /> : <div className="w-4 h-4 rounded-full border-2 border-gray-600"></div>}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div className="h-20"></div>
                            </div>
                        )}
                    </div>

                    {/* NAV */}
                    <div className="fixed bottom-0 left-0 right-0 bg-[#101011] border-t border-gray-800 px-1 pb-6 pt-2 flex justify-around z-50">
                        <NavButton active={activeTab === 'exchange'} onClick={() => setActiveTab('exchange')} icon={<Coins size={20} />} label="Jeu" />
                        <NavButton active={activeTab === 'mine'} onClick={() => setActiveTab('mine')} icon={<TrendingUp size={20} />} label="Investir" />
                        <NavButton active={activeTab === 'friends'} onClick={() => setActiveTab('friends')} icon={<Users size={20} />} label="Amis" />
                        <NavButton active={activeTab === 'leaderboard'} onClick={() => setActiveTab('leaderboard')} icon={<Trophy size={20} />} label="Top" />
                        <NavButton active={activeTab === 'airdrop'} onClick={() => setActiveTab('airdrop')} icon={<Gift size={20} />} label="Airdrop" />
                    </div>
                    <style>{`
                        @keyframes float-up {
                            0% { opacity: 1; transform: translateY(0) scale(1); }
                            100% { opacity: 0; transform: translateY(-80px) scale(1.5); }
                        }
                        .animate-float-up { animation: float-up 0.6s ease-out forwards; }
                        .scrollbar-hide::-webkit-scrollbar { display: none; }
                    `}</style>
                </div>
            );
        }

        function TaskRow({ title, done, onClick, icon }) {
            return (
                <button 
                    onClick={onClick}
                    disabled={done}
                    className={`w-full bg-gray-900 p-4 rounded-xl flex items-center justify-between border border-gray-800 mb-2 transition-all ${!done ? 'hover:bg-gray-800 active:scale-95 active:bg-gray-800' : 'opacity-60 cursor-default'}`}
                >
                    <div className="flex items-center">
                         {/* Ic√¥ne optionnelle si besoin, sinon juste le titre */}
                        <span className="text-sm font-medium text-left">{title}</span>
                    </div>
                    {done ? <CheckCircle size={18} className="text-green-500" /> : <div className="w-4 h-4 rounded-full border-2 border-gray-600 hover:border-white transition-colors"></div>}
                </button>
            );
        }

        function NavButton({ active, onClick, icon, label }) {
            return (
                <button onClick={onClick} className={`flex flex-col items-center justify-center w-[18%] py-1 rounded-lg transition-colors ${active ? 'text-white bg-gray-800' : 'text-gray-500 hover:text-gray-400'}`}>
                    <div className={active ? 'scale-110 transition-transform' : ''}>{icon}</div>
                    <span className="text-[9px] mt-1 font-medium uppercase tracking-wide">{label}</span>
                </button>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<Game />);
    </script>
</body>
</html>